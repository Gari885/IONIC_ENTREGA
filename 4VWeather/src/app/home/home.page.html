<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <div class="logo" (click)="resetHome()">
         <!-- Static Title as requested: "App name shouldn't change" -->
         <span>TIEMPO 4VIENTOS</span>
      </div>
    </ion-buttons>
    
    <div slot="end" class="lang-switcher">
        <div class="lang-btn" (click)="changeLanguage('es')" [class.active]="translationService.getCurrentLang() === 'es'">
          <img src="https://flagcdn.com/w40/es.png" alt="ES">
        </div>
        <div class="lang-btn" (click)="changeLanguage('en')" [class.active]="translationService.getCurrentLang() === 'en'">
          <img src="https://flagcdn.com/w40/gb.png" alt="EN">
        </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="main-container">
    
    <app-search-bar (search)="onSearch($event)"></app-search-bar>

    <div *ngIf="loading" class="loading-container">
      <ion-spinner name="crescent"></ion-spinner>
      <p>{{ 'SEARCH_PLACEHOLDER' | translate }}...</p> <!-- Fallback/Reusing key or new generic loading key? Let's use generic or just hardcode loading in Spanish if not critical, but let's try to be consistent. 'Cargando/Loading...' -->
    </div>

    <!-- ... error container ... -->

    <div *ngIf="!loading && !error && currentWeather">
      
      <app-weather-card [weather]="currentWeather"></app-weather-card>

      <div class="section-title">
        <h3>{{ 'TODAY' | translate }}</h3>
      </div>
      <app-hourly-forecast [forecast]="hourlyForecast"></app-hourly-forecast>

      <div class="section-title">
        <h3>{{ 'NEXT_DAYS' | translate }}</h3>
      </div>
      <app-daily-forecast [forecast]="forecast"></app-daily-forecast>

    </div>
  </div>
</ion-content>
